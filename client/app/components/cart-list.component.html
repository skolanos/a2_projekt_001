<div class="container">
	<h1 class="page-header">Koszyk - lista produktów znajdujących się w koszyku</h1>
	<div class="alert alert-danger" *ngIf="messages.length > 0">
		<strong>Informacje:</strong><br>
		<ul>
			<li *ngFor="let message of messages">{{message}}</li>
		</ul>
	</div>
	<form name="form" novalidate>
		<table class="table table-striped table-bordered table-hover table-sm">
			<thead class="bg-faded">
				<tr>
					<th>Kategoria</th>
					<th>Nazwa</th>
					<th>Cena</th>
					<th>Ilość</th>
					<th>J.m.</th>
					<th>Wartość</th>
				</tr>
			<tbody>
				<tr *ngFor="let item of items; let i = index; trackBy:customTrackBy" [class.table-info]="selectedItem && item.ko_id === selectedItem.ko_id" (click)="selectItemClick(item)">
					<td>{{item.kat_nazwa}}</td>
					<td>{{item.t_nazwa}}</td>
					<td>{{item.c_cena}}</td>
					<td><input type="number" min="1" pattern="^[-+]?\d+$" [ngModelOptions]="{standalone: true}" [(ngModel)]="items[i].ko_ile" class="form-control mr-sm-2" placeholder="Ilość" (keyup)="amountChange(item)" (change)="amountChange(item)" style="text-align: right" required></td>
					<td>{{item.c_jednostka}}</td>
					<td>{{item.wartosc}}</td>
				</tr>
			</tbody>
		</table>
		<div>
			<strong>Wartość produktów: {{totalValue}} PLN</strong>
		</div>
		<button type="button" class="btn btn-danger" (click)="deleteItem()" [disabled]="processing">Usuń pozycję</button>
		<button type="button" class="btn btn-danger" (click)="deleteAllItems()" [disabled]="processing">Wyczyść koszyk</button>
		<button type="button" class="btn btn-primary" (click)="registerOrder()" [disabled]="processing">Zrealizuj zamówienie</button>
	</form>
</div>
